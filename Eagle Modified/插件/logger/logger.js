$(document).ready(function(){let t=new Logger,e=new URL(location.href),n=document.getElementById("autoscroll"),o=document.getElementById("board"),c=document.getElementById("logs"),a=0;function l(e,n=!1){t.all(function(t){var o="";for(let e=0;e<t.length;e++){if(t[e].time=new Date(t[e].time).format("yyyy-MM-dd hh:mm:ss.S"),o+=n?`<span class="line">${r(t[e].time,t[e].level,t[e].descriptor,t[e].data)}</span>`:`[${t[e].time}] [${t[e].level}] ${t[e].descriptor}`,null!=t[e].data){let n=JSON.stringify(t[e].data);n.length>=150&&(n=n.slice(0,150)+"..."),o+=n}o+=n?"\n<br>":"\n"}e(o)})}function r(t,e,n,o){return n.startsWith("[debug]")||n.startsWith("[DEBUG]")?`[${t}] [${e}] <span style="color: red">${n}</span>`:n.startsWith('[background] {"method')?`[${t}] [${e}] [background] <span style="color: #808080">${n.replace("[background] ","")}</span>`:n.startsWith("[background]")?`[${t}] [${e}] <span style="color: #cfcfcf">${n}</span>`:n.startsWith("[content]")?`[${t}] [${e}] <span style="color: #808080">${n}</span>`:`[${t}] [${e}] ${n}`}function s(t){var e;l(function(n){var o,c,a;e=fflate.zipSync({"extension.log":fflate.strToU8(n)},{level:9}),o="extension-log.zip",c=new Blob([e],{type:"application/octet-stream"}),a=window.URL.createObjectURL(c),function(t,e){var n=new FileReader;n.onload=function(){var t=window.open(),o=document.createElement("a");o.setAttribute("href",n.result),o.setAttribute("download",e),t.document.body.appendChild(o),o.click()},n.readAsDataURL(t)}(c,o),setTimeout(function(){return window.URL.revokeObjectURL(a)},1e3),t()})}e.searchParams.has("download")?s(function(){}):$("body").css("display","block"),$("#download").click(function(){s()}),$(o).scroll(function(t){var e=$(this).scrollTop();e>a||(n.checked=!1),a=e}),$(document).on("click",".line",function(t){var e;e=$(this).text(),navigator.clipboard?navigator.clipboard.writeText(e).then(function(){console.log("Async: Copying to clipboard was successful!")},function(t){console.error("Async: Could not copy text: ",t)}):fallbackCopyTextToClipboard(e)}),setInterval(function(){2===t.status()&&l(function(t){c.innerHTML=t,1==n.checked&&(o.scrollTop=o.scrollHeight)},!0)},800)});