var win=window;function getSiteInfo(){var e,t,o,i,r,n,a=ExtractTextTool.extractSiteTags(),m=document.title,u=jQuery('meta[name="description"]').attr("content"),c=jQuery('meta[name="keywords"]').attr("content"),d=parseYourubeVideoID(location.href),s=parseBiliBiliVideoID(location.href),l=parseVimeoVideoID(location.href),y=jQuery("meta[property='og:video:width']").attr("content"),p=jQuery("meta[property='og:video:height']").attr("content");d&&(t=d,r="youtube",e=`https://i.ytimg.com/vi/${d}/hqdefault.jpg`,(n=jQuery(".ytp-time-duration").text())&&hmsToSecondsOnly(n)>0&&(o=hmsToSecondsOnly(n)));s&&(t=s,r="bilibili",e=jQuery("meta[property='og:image']").attr("content"),y=jQuery("meta[property='og:width']").attr("content"),p=jQuery("meta[property='og:height']").attr("content"),i="https://"+$(jQuery("#link2").val()).attr("src"),(n=jQuery(".bilibili-player-video-time-total").text())&&hmsToSecondsOnly(n)>0&&(o=hmsToSecondsOnly(n)));l&&(t=l,r="vimeo",e=jQuery("meta[property='og:image']").attr("content"),y=jQuery("meta[property='og:video:width']").attr("content"),p=jQuery("meta[property='og:video:height']").attr("content"),(n=jQuery(".vp-progress [aria-valuemax]").attr("aria-valuemax"))&&hmsToSecondsOnly(n)>0&&(o=hmsToSecondsOnly(n)));var h={metaTags:a,metaTitle:m,metaDescription:u,metaKeywords:c,videoID:t,videoWidth:y,videoHeight:p,videoMedium:r,videoThumb:e};o&&(h.videoDuration=o),i&&(h.videoEmbed=i),chrome.runtime.sendMessage({action:"extractSiteMetas",result:h})}function parseYourubeVideoID(e){var t=e.match(/(?:youtube(?:-nocookie)?\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return!(!t||11!=t[1].length)&&t[1]}function parseBiliBiliVideoID(e){try{return e.split("bilibili.com/video/")[1].split("?")[0]}catch(e){return}}function parseVimeoVideoID(e){var t=e.match(/^.+vimeo.com\/(.*\/)?([^#\?]*)/);return t?t[2]||t[1]:null}function hmsToSecondsOnly(e){for(var t=e.split(":"),o=0,i=1;t.length>0;)o+=i*parseInt(t.pop(),10),i*=60;return o}getSiteInfo();