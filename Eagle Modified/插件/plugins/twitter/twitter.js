let VIDEO_URL_CACHE_MAP={};!function(){let e=null;function t(){function e(e,t){e.setAttribute("eagle-src",t),e.setAttribute("eagle-src-type","video")}function t(e){e.setAttribute("eagle-src-loading","true")}function n(e){e.removeAttribute("eagle-src-loading")}function i(e,t,i){n(e),n(t),null!=i&&n(i)}function l(e){return"/uma_musu/status/1519512068961218560/retweets".match(/\/(\d+)\//)[1]}function r(e){return e.match(/\d+/)}function o(l,r,o=null){let u=r.nextElementSibling,c=null;if(c=r.closest("article").querySelector("video"),t(r),null!=u&&t(u),null==c)return;t(c);let s=`https://twitter.com/i/api/2/timeline/conversation/${l}.json?tweet_mode=extended&include_entities=false&include_user_entities=false`,a=function(e){let t={};return document.cookie.split(";").filter(e=>e.indexOf("=")>0).forEach(e=>{e.replace(/^([^=]+)=(.+)$/,(e,n,i)=>{t[n.trim()]=i.trim()})}),e?t[e]:t}(),d={authorization:"Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA","x-twitter-active-user":"yes","x-twitter-client-language":a.lang,"x-csrf-token":a.ct0},f=r.getAttribute("poster").split("/"),A=f[f.length-1].split(".")[0];console.log(A),fetch(s,{headers:d}).then(function(e){return e.json()}).then(function(t){let i=t.globalObjects.tweets,l=null;for(let e in i){let t=i[e];if(t.extended_entities&&t.extended_entities.media){let e=t.extended_entities.media[0];if(console.log(e),"video"==e.type&&e.media_url.includes(A)){l=e.video_info.variants[e.video_info.variants.length-2].url;break}}}if(!l)throw"force exit";e(r,l),e(c,l),c.setAttribute("draggable","true"),n(r),n(c),null!=u&&(e(u,l),n(u))},function(){i(r,c,u)}).catch(e=>{i(r,c,u)})}if(location.href.startsWith("https://twitter.com")){let e=["video:not([eagle-src]):not([eagle-src-loading])"];for(var u=0;u<e.length;u++){let t=document.querySelectorAll(e[u]);t.length>0&&t.forEach((e,t)=>{if(e.currentSrc.indexOf(".mp4")>-1)return;let n=e.closest("article").querySelector('a[href$="/retweets"]');if(n){let i=n.getAttribute("href");console.log(i),r(i)&&o(l(),e,t)}})}}}window.addEventListener("load",function(){t()}),setInterval(function(){location.href!=e&&(e=location.href,function(e){let t=document.querySelector('div[role="dialog"]'),n=document.querySelector("body div#react-root"),i=document.querySelector("video");if(null==i){if(null!=t){function l(t){if(i=document.querySelector("video"))return e(),void n.disconnect()}let n=new MutationObserver(l);n.observe(t,{childList:!0,subtree:!0})}else if(null!=n){function l(n){for(var i=0;i<n.length;i++){let l=n[i];if("attributes"==l.type&&"VIDEO"===l.target.tagName)return e(),void t.disconnect()}}let t=new MutationObserver(l);t.observe(n,{childList:!0,subtree:!0,attributes:!0})}}else e()}(function(){t()}))},500),function(){let e=null;window.addEventListener("scroll",function(){clearTimeout(e),e=setTimeout(function(){t()},300)})}(),t()}();