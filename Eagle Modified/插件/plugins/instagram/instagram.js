let VIDEO_URL_CACHE_MAP={};!function(){let e=null,t=0,n="",i="";function l(){function e(e,t){e.setAttribute("eagle-src",t),e.setAttribute("eagle-src-type","video")}function t(e){e.setAttribute("eagle-src-loading","true")}function l(e){e.removeAttribute("eagle-src-loading")}function r(e,t,n){l(e),l(t),null!=n&&l(n)}function o(e){return e.match(/\/p\/(.+?)\//)[0]}function c(e){return e.match(/\/p\/(.+?)\//)}function u(n,i,o=null){let c=i.nextElementSibling,u=null;if(u=null==o?i.closest("article").querySelector('div:not([class]) div[role="button"]:empty'):i.closest("ul").querySelectorAll('div:not([class]) div[role="button"]:empty')[o],t(i),null!=c&&t(c),null==u)return;t(u);let s=document.body.innerHTML.match(/\"appId\":\"(\d+)\"/)[1],a=function(e){for(var t,n=BigInt(0),i=0;i<e.length;i++)t=e[i],n=BigInt(n*BigInt(64))+BigInt("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".indexOf(t));return n}(n.match(/\/p\/(\S+)\//)[1]).toString();fetch(`https://i.instagram.com/api/v1/media/${a}/info/`,{credentials:"include",headers:{"x-ig-app-id":s}}).then(function(e){return e.json()}).then(function(t){let n=getObjectValue(t,"items.0.video_versions.0.url",null);if(n||(n=getObjectValue(t,`items.0.carousel_media.${o}.video_versions.0.url`,null)),!n)throw"force exit";e(i,n),e(u,n),u.setAttribute("draggable","true"),l(i),l(u),null!=c&&(e(c,n),l(c))},function(){r(i,u,c)}).catch(e=>{r(i,u,c)})}if(location.href.startsWith("https://www.instagram.com")){let e=["li video:not([eagle-src]):not([eagle-src-loading])","video:not([eagle-src]):not([eagle-src-loading])"],t=document.querySelector('article[role="presentation"]>div>div>div>div:nth-of-type(2) div');t&&t.classList.length>=2&&(i=t.classList[0],n=t.classList[1]);for(var s=0;s<e.length;s++){let t=document.querySelectorAll(e[s]);t.length>0&&t.forEach((e,t)=>{if(e.currentSrc.indexOf(".mp4")>-1)return;let n=e.closest("article").querySelector('div a[href^="/p/"]:not([href$="liked_by/"])').getAttribute("href");c(n)&&(0==s?u(o(n),e,t):u(o(n),e))})}let l=document.querySelectorAll('a[href^="/p/"] img:not([eagle-src]):not([eagle-src-loading])');l.length>0&&l.forEach(e=>{let t=e.closest('a[href^="/p/"]');if(!t)return!1;e.setAttribute("eagle-src",t.getAttribute("href")+"media/?size=l")})}}window.addEventListener("load",function(){l()}),setInterval(function(){location.href!=e&&((e=location.href).includes("/p/")||e.includes("/reel/")?function(e){let t=document.querySelector('div[role="dialog"]'),n=document.querySelector('body div[id^="mount"]'),i=document.querySelector("video");if(null==i){if(null!=t){function l(t){if(i=document.querySelector("video"))return e(),void n.disconnect()}let n=new MutationObserver(l);n.observe(t,{childList:!0,subtree:!0})}else if(null!=n){function l(n){for(var i=0;i<n.length;i++){let l=n[i];if("attributes"==l.type&&"VIDEO"===l.target.tagName)return e(),void t.disconnect()}}let t=new MutationObserver(l);t.observe(n,{childList:!0,subtree:!0,attributes:!0})}}else e()}(function(){l()}):l())},500),function(){let e=null;window.addEventListener("scroll",function(){clearTimeout(e),e=setTimeout(function(){window.document.body.scrollHeight!=t&&(t=window.document.body.scrollHeight,l())},300)})}(),l()}();