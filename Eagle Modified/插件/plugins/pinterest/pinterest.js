let VIDEO_URL_CACHE_MAP={};!function(){const e="eagle-src-loading",t=['div[data-test-id="visual-content-container"] video','div[data-test-id="closeup-body-landscape"] video',".__gestaltThemeVideo video"];let n=null,i=0;function o(){if(location.href.includes("/pin/")){let e=$('[data-test-id="gradient"]');if(e){let n=e.find('div[itemprop="name"]');n&&e.find('[data-test-id="closeup-image"] img, '+t.join(", ")).attr("eagle-title",n.text())}}let n=$('[data-test-id="pinWrapper"]:has([data-test-id="pointer-events-wrapper"]), [data-test-id="pinWrapper"]:has([data-test-id="pinrep-video"])');function i(t,n,i){if(VIDEO_URL_CACHE_MAP[n])return!1;i.setAttribute(e,"true");let o=window.location.hostname;fetch(`https://${o}/resource/PinResource/get/?source_url=%2Fpin%2F${t}%2F&data=%7B%22options%22%3A%7B%22isPrefetch%22%3Afalse%2C%22id%22%3A%22${t}%22%2C%22field_set_key%22%3A%22auth_web_main_pin%22%2C%22is_landing_page%22%3Afalse%2C%22allowStale%22%3Afalse%2C%22no_fetch_context_on_resource%22%3Afalse%7D%2C%22context%22%3A%7B%7D%7D`).then(function(e){return e.json()}).then(function(t){i.removeAttribute(e);try{VIDEO_URL_CACHE_MAP[n]=t.resource_response.data.videos.video_list.V_720P.url}catch(e){}},function(){i.removeAttribute(e)})}$.each(n,function(e,t){let n=$(t).find("img, video"),i=$(t).find('[data-test-id="pointer-events-wrapper"] a[href^="/pin/"]');i.length>0&&n.length>0&&$(n).attr("eagle-title",i.text())});var o=function(e){return e.split("/")[4]},r=function(e){return e.split("/")[7]};if(null!=location.href.match("https://(.*).pinterest.(.*)/pin/(.*)")){let e=t.map(e=>`${e}:not([eagle-src]):not([eagle-src-loading])`).join(", "),n=document.querySelectorAll(e);if(n&&n[0]){let e=n[0],t=r(e.getAttribute("poster"));i(o(location.href),t,e)}}document.querySelectorAll('[data-test-id="pinrep-video"] video:not([eagle-src])').forEach(e=>{let t=r(e.getAttribute("poster"));i(o(e.closest("a").href),t,e)}),document.querySelectorAll('[data-test-id="pinrep-video"] img:not([eagle-src])').forEach(e=>{let t=r(e.getAttribute("src"));i(o(e.closest("a").href),t,e)})}!function(){let e=!1;setInterval(function(){location.href==n&&e||(n=location.href,function(e){let t=document.querySelector('div[role="main"]')||document.querySelector("div.appContent");if(null!=t){let n=new MutationObserver(function(t){e(),n.disconnect()});return n.observe(t,{childList:!0,subtree:!0}),!0}return!1}(()=>{o()})&&(e=!0))},1e3)}(),function(){let e=null;window.addEventListener("scroll",function(){clearTimeout(e),e=setTimeout(function(){window.document.body.scrollHeight!=i&&(i=window.document.body.scrollHeight,o())},500)})}(),o()}();